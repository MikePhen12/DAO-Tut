(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1692)}])},1692:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n(5893),i=n(5205),s=n(171),o=n(8105),r=n(9008),p=n.n(r),u=n(7294),l=n(4693),y=n.n(l);let d="0x760d69E5388C8eb7d613e58F64B4423FA5401b72",c=[{inputs:[{internalType:"address",name:"_nftMarketPlace",type:"address"},{internalType:"address",name:"_cryptoDevsNFT",type:"address"}],stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[{internalType:"uint256",name:"_nftTokenId",type:"uint256"}],name:"createProposal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalIndex",type:"uint256"}],name:"executeProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"numProposals",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"proposals",outputs:[{internalType:"uint256",name:"nftTokenId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"yesVotes",type:"uint256"},{internalType:"uint256",name:"noVotes",type:"uint256"},{internalType:"bool",name:"executed",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalIndex",type:"uint256"},{internalType:"enum CryptoDevsDAO.Vote",name:"vote",type:"uint8"}],name:"voteOnProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawEther",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],m=[{inputs:[{internalType:"string",name:"baseURI",type:"string"},{internalType:"address",name:"whitelistContract",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"Withdrawl",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"_paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxTokenIds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"presaleEnded",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"presaleMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"presaleStarted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"val",type:"bool"}],name:"setPaused",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startPresale",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenIds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];var b=n(7160),w=n.n(b);function f(){let[e,t]=(0,u.useState)("0"),[n,r]=(0,u.useState)("0"),[l,b]=(0,u.useState)([]),[f,T]=(0,u.useState)(0),[h,x]=(0,u.useState)(""),[v,_]=(0,u.useState)(""),[M,j]=(0,u.useState)(!1),[g,k]=(0,u.useState)(!1),[N,I]=(0,u.useState)(!1),C=(0,u.useRef)(),O=async()=>{try{await B(),k(!0)}catch(e){console.error(e)}},P=async()=>{try{let e=await B(!0),t=W(e),n=await t.owner(),a=await e.getAddress();a.toLowerCase()===n.toLowerCase()&&I(!0)}catch(i){console.error(i.message)}},S=async()=>{try{let e=await B(!0),t=W(e),n=await t.withdrawEther();j(!0),await n.wait(),j(!1),E()}catch(a){console.error(a),window.alert(a.reason)}},E=async()=>{try{let e=await B(),n=await e.getBalance(d);t(n.toString())}catch(a){console.error(a)}},A=async()=>{try{let e=await B(),t=W(e),n=await t.numProposals();r(n.toString())}catch(a){console.error(a)}},D=async()=>{try{let e=await B(!0),t=X(e),n=await t.balanceOf(e.getAddress());T(parseInt(n.toString()))}catch(a){console.error(a)}},V=async()=>{try{let e=await B(!0),t=W(e),n=await t.createProposal(h);j(!0),await n.wait(),await A(),j(!1)}catch(a){console.error(a),window.alert(error.data.message)}},F=async e=>{try{let t=await B(),n=W(t),a=await n.proposals(e),i={proposalId:e,nftTokenId:a.nftTokenId.toString(),deadline:new Date(1e3*parseInt(a.deadline.toString())),yesVotes:a.yesVotes.toString(),noVotes:a.noVotes.toString(),executed:a.executed};return i}catch(s){console.error(s)}},H=async()=>{try{let e=[];for(let t=0;t<n;t++){let a=await F(t);e.push(a)}return b(e),e}catch(i){console.error(i)}},Y=async(e,t)=>{try{let n=await B(!0),a=W(n),i=await a.voteOnProposal(e,"YES"===t?0:1);j(!0),await i.wait(),j(!1),await H()}catch(s){console.error(s),window.alert(s.data.message)}},L=async e=>{try{let t=await B(!0),n=W(t),a=await n.executeProposal(e);j(!0),await a.wait(),j(!1),await H(),E()}catch(i){console.error(i),window.alert(i.reason)}},B=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=await C.current.connect(),n=new i.Q(t),{chainId:a}=await n.getNetwork();if(5!==a)throw window.alert("Please switch to the Goerli network!"),Error("Please switch to the Goerli network");if(e){let s=n.getSigner();return s}return n},W=e=>new s.CH(d,c,e),X=e=>new s.CH("0x31dF4535A4c1Ac5bF17d208F27536dC520755697",m,e);return(0,u.useEffect)(()=>{g||(C.current=new(y())({network:"goerli",providerOptions:{},disableInjectedProvider:!1}),O().then(()=>{E(),D(),A(),P()}))},[g]),(0,u.useEffect)(()=>{"View Proposals"===v&&H()},[v]),(0,a.jsxs)("div",{children:[(0,a.jsxs)(p(),{children:[(0,a.jsx)("title",{children:"CryptoDevs DAO"}),(0,a.jsx)("meta",{name:"description",content:"CryptoDevs DAO"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("div",{className:w().main,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:w().title,children:"Welcome to Crypto Devs!"}),(0,a.jsx)("div",{className:w().description,children:"Welcome to the DAO!"}),(0,a.jsxs)("div",{className:w().description,children:["Your CryptoDevs NFT Balance: ",f,(0,a.jsx)("br",{}),"Treasury Balance: ",(0,o.formatEther)(e)," ETH",(0,a.jsx)("br",{}),"Total Number of Proposals: ",n]}),(0,a.jsxs)("div",{className:w().flex,children:[(0,a.jsx)("button",{className:w().button,onClick:()=>_("Create Proposal"),children:"Create Proposal"}),(0,a.jsx)("button",{className:w().button,onClick:()=>_("View Proposals"),children:"View Proposals"})]}),"Create Proposal"===v?M?(0,a.jsx)("div",{className:w().description,children:"Loading... Waiting for transaction..."}):0===f?(0,a.jsxs)("div",{className:w().description,children:["You do not own any CryptoDevs NFTs. ",(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"You cannot create or vote on proposals"})]}):(0,a.jsxs)("div",{className:w().container,children:[(0,a.jsx)("label",{children:"Fake NFT Token ID to Purchase: "}),(0,a.jsx)("input",{placeholder:"0",type:"number",onChange:e=>x(e.target.value)}),(0,a.jsx)("button",{className:w().button2,onClick:V,children:"Create"})]}):"View Proposals"===v?M?(0,a.jsx)("div",{className:w().description,children:"Loading... Waiting for transaction..."}):0===l.length?(0,a.jsx)("div",{className:w().description,children:"No proposals have been created"}):(0,a.jsx)("div",{children:l.map((e,t)=>(0,a.jsxs)("div",{className:w().proposalCard,children:[(0,a.jsxs)("p",{children:["Proposal ID: ",e.proposalId]}),(0,a.jsxs)("p",{children:["Fake NFT to Purchase: ",e.nftTokenId]}),(0,a.jsxs)("p",{children:["Deadline: ",e.deadline.toLocaleString()]}),(0,a.jsxs)("p",{children:["Yes Votes: ",e.yesVotes]}),(0,a.jsxs)("p",{children:["No Votes: ",e.noVotes]}),(0,a.jsxs)("p",{children:["Executed?: ",e.executed.toString()]}),e.deadline.getTime()>Date.now()&&!e.executed?(0,a.jsxs)("div",{className:w().flex,children:[(0,a.jsx)("button",{className:w().button2,onClick:()=>Y(e.proposalId,"YES"),children:"Vote YAY"}),(0,a.jsx)("button",{className:w().button2,onClick:()=>Y(e.proposalId,"NO"),children:"Vote NAY"})]}):e.deadline.getTime()<Date.now()&&!e.executed?(0,a.jsx)("div",{className:w().flex,children:(0,a.jsxs)("button",{className:w().button2,onClick:()=>L(e.proposalId),children:["Execute Proposal"," ",e.yesVotes>e.noVotes?"(YES)":"(NO)"]})}):(0,a.jsx)("div",{className:w().description,children:"Proposal Executed"})]},t))}):null,N?(0,a.jsx)("div",{children:M?(0,a.jsx)("button",{className:w().button,children:"Loading..."}):(0,a.jsx)("button",{className:w().button,onClick:S,children:"Withdraw DAO ETH"})}):""]}),(0,a.jsx)("div",{children:(0,a.jsx)("img",{className:w().image,src:"0.svg"})})]}),(0,a.jsx)("footer",{className:w().footer,children:"Made with ‚ù§ by Crypto Devs"})]})}},7160:function(e){e.exports={main:"Home_main__nLjiQ",footer:"Home_footer____T7K",image:"Home_image__yn5pu",title:"Home_title__T09hD",description:"Home_description__41Owk",button:"Home_button__Zs7A2",button2:"Home_button2__vXCxt",proposalCard:"Home_proposalCard__kNEYI",container:"Home_container__bCOhY",flex:"Home_flex__XpVr_"}},3196:function(){}},function(e){e.O(0,[982,778,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);